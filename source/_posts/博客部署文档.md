---
title: 博客部署文档
sticky: false
mermaid: false
copyright: true
date: 2025-08-07 23:24:28
tags: []
categories: []
cover:
comments:
sponsor:
---

本文将粗略地介绍一下博客搭建的大致流程及常见命令，不建议作为参考文档。

## 必要配置

请参阅 [Hexo 文档](https://hexo.io/zh-cn/docs/)。

## BLOG 写作

### 创建新文章

在终端中输入

```bash
npx hexo new [layout] <title>
```

框架将自动根据参数创建一个名为 `<title>` 的 md 文件[^1]。

| 布局  | 路径           |
| ----- | -------------- |
| post  | source/_posts  |
| page  | source         |
| draft | source/_drafts |

若使用 `draft` 布局创建文章，则默认不会在网站中被显示。在终端中输入

```bash
npx hexo publish [layout] <title>
```

以将文章发布至其他布局。

使用合适的编辑器编辑完 md 文件后，在终端中输入

```bash
npx hexo generate
```

hexo 将会根据所编写的 md 文件或其他支持文件生成静态网页，并放置于 `/public` 中。添加 `--watch` 参数可以自动监测 md 文件更改并生成新的静态文件。

在终端中输入

```bash
npx hexo server
```

将会在[本地](http://localhost:4000/)端口上部署网站，用于本地调试，使用 `--draft` 参数可以在网站中显示草稿。

### 编写文章

一般情况下，可以直接根据 [Markdown](https://markdown.com.cn/basic-syntax/) 所通用的格式进行文章书写。若需要支持数学公式，请在内层 `_config.yml` 中将 `math.enable` 配置为 `true`。并使用两个 `$` 符号括起来 [$\LaTeX$](https://www.latex-project.org/) 表达式以显示数学公式。详细配置方式请参阅 [reimu 主题文档](https://d-sketon.github.io/20230707/hexo-theme-reimu-guide/)。

### 参考文档

详细使用文档请参考

- [Hexo 官方文档](https://hexo.io/zh-cn/docs/)
- [reimu 主题文档](https://d-sketon.github.io/20230707/hexo-theme-reimu-guide/)

[^1]: Hexo 支持以任何格式书写文章，只要安装了相应的渲染插件。以后将不再区分文章和 md 文件，文章即代表一系列可以被渲染为静态网页的文件。

## BLOG 发布

[本网站](https://blog.nhirsama.cn/)基于 [GitHub Actions](https://github.com/nhirsama/blog) 自动运行 Workflow 以生成静态网页，并于 GitHub Pages 托管。

GitHub Actions Free 用户每个月可以免费使用 2000 分钟，使用学生认证的 Pro 用户可以使用 3000 分钟，这个时长在大部分情况下是足够使用的。同时 GitHub Page 托管的静态网站也足够优秀，可以免去繁琐的网站维护工作，至少可以让你的服务器少一个被攻击的入口。

本网站所对应的 [GitHub 仓库](https://github.com/nhirsama/blog) 有三个分支。

| Branch   | 用途                                                         |
| :------- | ------------------------------------------------------------ |
| main     | 主分支，用于存放干净的项目源代码                             |
| draft    | 草稿分支，领先于 main 分支，用于存放不完善的源代码           |
| gh-pages | 发布分支，由 GitHub Actions 控制，当 main 有新的推送时触发 Workflow，自动使用 Hexo 生成静态网页并存放于此 |

根据 [`.github/workflows/deploy.yml`](https://github.com/nhirsama/blog/blob/main/.github/workflows/deploy.yml) 中的 `yml` 配置文件，可以自动实现上述功能，在检测到 `main` 分支新的推送时，自动安装 `Hexo` 及配套的依赖，在删除 `gh-pages` 分支原有的数据后，将根据`[source](https://github.com/nhirsama/blog/tree/main/source)` 中的文章生成静态页面并推送至 `gh-pages`分支。

之后只需要配置好 pages 来源于 `gh-pages` 分支即可。

## 所用环境

- GCC version 15.1.0 
- GO version go1.24.4 windows/amd64
- Node v22.12.0
- Git version 2.46.0.windows.1
- Hexo-cli 4.3.2
- Windows 11 专业版 23H2
- PowerShell 7.5.2
